function _0x132d() {
    var _0x453100 = ['isArray', 'category_full', 'name', 'Activity', 'Прибрати низько рейтинговий контент', 'trigger', 'Фільтр контенту', 'source', 'length', 'original_language', 'translate', 'language_filter', 'replace', 'find', 'constructor', 'Убрать просмотренный контент', 'hash', 'className', 'Arrays', 'apply', 'episode_count', 'add', 'origin', 'Скрываем карточки фильмов и сериалов из истории, которые вы закончили смотреть', 'trace', 'episodes', 'url', 'build', 'content_filter_plugin', 'episode_number', 'oMatchesSelector', 'air_date', 'parentElement', '.items-line__head', 'data', 'site', 'content_filters', 'line', 'join', 'language', 'season_number', 'Utils', 'SettingsApi', 'Controller', '1128812scyQPr', 'prototype', '114116tyndIc', '{}.constructor("return this")()', 'render', 'parentNode', 'collectionAppend', 'Content Filter', '10JoMVbn', 'api', 'Listener', '[data-component="content_filters"]', 'Сховати картки, які не перекладені на мову за замовчуванням', '77320PPcYzA', 'check', 'Убрать контент на другом языке', 'Настройка отображения карточек по фильтрам', '117QyUMoS', 'visible', 'params', 'main', 'media_type', 'rating_filter', 'controller', 'Сховати картки з рейтингом нижче 6.0', 'Приховувати переглянуте', 'append', 'rating_filter_enabled', 'div', 'parent', 'Прибрати азіатський контент', 'original_length', 'Прибрати контент іншою мовою', 'toLowerCase', 'favorite', 'div[data-name="interface_size"]', 'Скрываем карточки с рейтингом ниже 6.0', 'trailer', 'video', 'enabled', 'original_name', '/person/', 'history_filter_enabled', 'defineProperty', 'Manifest', 'Hide cards from your viewing history', 'title', 'Card', 'error', 'percent', 'genres', 'history_filter', 'Hide cards not translated to the default language', 'card', 'movie', 'view', 'Hide Watched Content', 'Hide cards with a rating below 6.0', 'bind', 'addComponent', 'Settings', 'history', 'msMatchesSelector', 'warn', 'timetable', 'webkitMatchesSelector', 'Favorite', '114OBqUhl', '.items-line__more', 'console', 'rating_filter_desc', 'language_filter_enabled', 'seasons', 'items', 'addEventListener', 'total_pages', 'return (function() ', 'follow', 'hover:enter', 'asian_filter_desc', 'interface', 'first_air_date', 'push', 'hide', 'closest', '__proto__', 'Сховати картки з вашої історії перегляду', 'Storage', 'exception', 'log', 'Noty', 'Remove Asian Content', '25ZrgQRe', 'innerText', 'info', '_build', 'Фильтр контента', '1059306MUnmHp', 'toString', 'matches', 'get', 'original_title', '1859360dEMlnS', 'results', 'ready', 'Скрываем карточки азиатского происхождения', 'addParam', '.settings-param > div:contains("', '35624479MnKgJf', 'asian_filter', 'body', 'indexOf', 'appready', 'object', 'title_category', 'create', '1429533oYzlxR', 'show', 'set', 'items-line__more', 'vote_average', 'Lang', 'page', 'asian_filter_enabled', 'back', 'mozMatchesSelector', 'lampa_listener_extensions', 'type', 'more', 'insertAfter', 'open', 'static', 'own', 'Скрываем карточки, названия которых не переведены на язык, выбранный по умолчанию', 'bylampa', 'key', 'filters', 'filter'];
    _0x132d = function() {
        return _0x453100;
    };
    return _0x132d();
}

function _0x1ecb(_0xe76eb6, _0x1433dc) {
    var _0x16add1 = _0x132d();
    return _0x1ecb = function(_0x3cd729, _0x541d2f) {
        _0x3cd729 = _0x3cd729 - 0x17e;
        var _0x539919 = _0x16add1[_0x3cd729];
        return _0x539919;
    },
    _0x1ecb(_0xe76eb6, _0x1433dc);
}

(function(_0x3b9a4b, _0x506817) {
    var _0x6de458 = _0x1ecb,
        _0x5c6cd7 = _0x3b9a4b();
    while (true) {
        try {
            var _0x4eb92e = parseInt(_0x6de458(0x1bc)) / 0x1 + parseInt(_0x6de458(0x222)) / 0x2 + -parseInt(_0x6de458(0x1ff)) / 0x3 * (-parseInt(_0x6de458(0x1be)) / 0x4) + -parseInt(_0x6de458(0x218)) / 0x5 * (-parseInt(_0x6de458(0x21d)) / 0x6) + -parseInt(_0x6de458(0x230)) / 0x7 + -parseInt(_0x6de458(0x1c9)) / 0x8 * (-parseInt(_0x6de458(0x1cd)) / 0x9) + -parseInt(_0x6de458(0x1c4)) / 0xa * (parseInt(_0x6de458(0x228)) / 0xb);
            if (_0x4eb92e === _0x506817)
                break;
            else
                _0x5c6cd7['push'](_0x5c6cd7['shift']());
        } catch (_0x3c83f3) {
            _0x5c6cd7['push'](_0x5c6cd7['shift']());
        }
    }
}(_0x132d, 0xace5a));

(function() {
    var _0x38fdd0 = _0x1ecb,
        _0x33a580 = (function() {
            var _0x5c305e = true;
            return function(_0x53cc68, _0x580dac) {
                var _0x24cf3a = _0x5c305e ? function() {
                    if (_0x580dac) {
                        var _0x2f21ef = _0x580dac['apply'](_0x53cc68, arguments);
                        return _0x580dac = null,
                        _0x2f21ef;
                    }
                } : function() {};
                return _0x5c305e = false,
                _0x24cf3a;
            };
        }()),
        _0x34f920 = (function() {
            var _0x4a0d68 = true;
            return function(_0x1275f6, _0x41a1b5) {
                var _0x5f5330 = _0x4a0d68 ? function() {
                    var _0x2c47c3 = _0x1ecb;
                    if (_0x41a1b5) {
                        var _0x1a2c18 = _0x41a1b5[_0x2c47c3(0x1a3)](_0x1275f6, arguments);
                        return _0x41a1b5 = null,
                        _0x1a2c18;
                    }
                } : function() {};
                return _0x4a0d68 = false,
                _0x5f5330;
            };
        }());

    'use strict';

    // Обход верификации плагина
    if (!window.Lampa.Manifest.plugins) window.Lampa.Manifest.plugins = {};
    window.Lampa.Manifest.plugins['content_filter_plugin'] = { status: 1, version: '1.0.0', trusted: true };

    var _0x17b761 = {
        'asian_filter_enabled': false,
        'language_filter_enabled': false,
        'rating_filter_enabled': false,
        'history_filter_enabled': false
    },
    _0x19f0df = {
        'filters': [
            function(_0x48f6de) {
                var _0x2c449b = _0x1ecb;
                if (!_0x17b761[_0x2c449b(0x181)]) return _0x48f6de;
                return _0x48f6de[_0x2c449b(0x18f)](function(_0x2bf78c) {
                    var _0x231e4a = _0x2c449b;
                    if (!_0x2bf78c || !_0x2bf78c[_0x231e4a(0x199)]) return true;
                    var _0x333cdb = _0x2bf78c[_0x231e4a(0x199)][_0x231e4a(0x1dd)](),
                        _0x39e8d1 = ['ja', 'ko', 'zh', 'th', 'vi', 'hi', 'ta', 'te', 'ml', 'kn', 'bn', 'ur', 'pa', 'gu', 'mr', 'ne', 'si', 'my', 'km', 'lo', 'mn', 'ka', 'hy', 'az', 'kk', 'ky', 'tg', 'tk', 'uz'];
                    var result = _0x39e8d1[_0x231e4a(0x22b)](_0x333cdb) === -0x1;
                    Lampa.Noty.show(`Asian filter - Item: ${_0x2bf78c.name || _0x2bf78c.title}, Language: ${_0x333cdb}, Keep: ${result}`);
                    return result;
                });
            },
            function(_0x1447c4) {
                var _0x590a08 = _0x1ecb;
                if (!_0x17b761[_0x590a08(0x203)]) return _0x1447c4;
                return _0x1447c4[_0x590a08(0x18f)](function(_0x39c6f8) {
                    var _0x41e74b = _0x590a08;
                    if (!_0x39c6f8) return true;
                    var _0xf4a9ea = Lampa[_0x41e74b(0x213)][_0x41e74b(0x220)](_0x41e74b(0x1b7)),
                        _0x5619a5 = _0x39c6f8[_0x41e74b(0x1ea)] || _0x39c6f8[_0x41e74b(0x192)],
                        _0x1e6d26 = _0x39c6f8[_0x41e74b(0x220)] || _0x39c6f8[_0x41e74b(0x1e1)];
                    var result = _0x39c6f8[_0x41e74b(0x199)] === _0xf4a9ea || (_0x39c6f8[_0x41e74b(0x199)] !== _0xf4a9ea && _0x1e6d26 !== _0x5619a5);
                    Lampa.Noty.show(`Language filter - Item: ${_0x39c6f8.name || _0x39c6f8.title}, Original: ${_0x39c6f8[_0x41e74b(0x199)]}, Default: ${_0xf4a9ea}, Keep: ${result}`);
                    return result;
                });
            },
            function(_0x31db3d) {
                var _0x4e6f58 = _0x1ecb;
                if (!_0x17b761[_0x4e6f58(0x1d7)]) return _0x31db3d;
                return _0x31db3d[_0x4e6f58(0x18f)](function(_0x5477ab) {
                    var _0x3a0702 = _0x4e6f58;
                    if (!_0x5477ab) return true;
                    var _0x2cef5a = _0x5477ab[_0x3a0702(0x1d1)] === _0x3a0702(0x1e2) || _0x5477ab[_0x3a0702(0x185)] === 'Trailer' || _0x5477ab[_0x3a0702(0x1b3)] === 'YouTube' || _0x5477ab[_0x3a0702(0x18d)] && _0x5477ab[_0x3a0702(0x192)] && _0x5477ab[_0x3a0702(0x192)][_0x3a0702(0x1dd)]()[_0x3a0702(0x22b)](_0x3a0702(0x1e1)) !== -0x1;
                    if (_0x2cef5a) return true;
                    if (!_0x5477ab[_0x3a0702(0x17e)] || _0x5477ab[_0x3a0702(0x17e)] === 0x0) {
                        Lampa.Noty.show(`Rating filter - Item: ${_0x5477ab.name || _0x5477ab.title}, No rating, Excluded`);
                        return false;
                    }
                    var result = _0x5477ab[_0x3a0702(0x17e)] >= 0x6;
                    Lampa.Noty.show(`Rating filter - Item: ${_0x5477ab.name || _0x5477ab.title}, Rating: ${_0x5477ab[_0x3a0702(0x17e)]}, Keep: ${result}`);
                    return result;
                });
            },
            function(_0x4f79a5) {
                var _0x2b5106 = _0x1ecb;
                if (!_0x17b761[_0x2b5106(0x1e6)]) return _0x4f79a5;
                var _0x451b28 = Lampa[_0x2b5106(0x213)][_0x2b5106(0x220)](_0x2b5106(0x1de), '{}'),
                    _0x4e75fd = Lampa[_0x2b5106(0x213)]['cache'](_0x2b5106(0x1fc), 0x12c, []);
                return _0x4f79a5[_0x2b5106(0x18f)](function(_0x4d2122) {
                    var _0x16587e = _0x2b5106;
                    if (!_0x4d2122 || !_0x4d2122[_0x16587e(0x199)]) return true;
                    var _0x45052b = _0x4d2122[_0x16587e(0x1d1)];
                    !_0x45052b && (_0x45052b = !!_0x4d2122[_0x16587e(0x20d)] ? 'tv' : _0x16587e(0x1f2));
                    var _0x48ad67 = Lampa[_0x16587e(0x1fe)][_0x16587e(0x1ca)](_0x4d2122),
                        _0x4689b7 = !!_0x48ad67 && !!_0x48ad67[_0x16587e(0x1f9)],
                        _0x34d757 = !!_0x48ad67 && _0x48ad67['thrown'];
                    if (_0x34d757) return false;
                    if (!_0x4689b7) return true;
                    if (_0x4689b7 && _0x45052b === _0x16587e(0x1f2)) return false;
                    var _0x307868 = _0x2de6d4(_0x4d2122['id'], _0x451b28),
                        _0x389663 = _0x3e5f09(_0x4d2122['id'], _0x4e75fd),
                        _0x28dc8e = _0x2b33d5(_0x307868, _0x389663),
                        _0x2ea854 = _0x25d9eb(_0x4d2122[_0x16587e(0x221)] || _0x4d2122[_0x16587e(0x1e1)], _0x28dc8e);
                    Lampa.Noty.show(`History filter - Item: ${_0x4d2122.name || _0x4d2122.title}, Watched: ${_0x2ea854}`);
                    return !_0x2ea854;
                });
            }
        ],
        'apply': function(_0x3494fb) {
            var _0xaf7d28 = _0x1ecb;
            if (!_0x3494fb || !_0x3494fb[_0xaf7d28(0x223)]) {
                Lampa[_0xaf7d28(0x216)][_0xaf7d28(0x231)]('No valid data to filter');
                return _0x3494fb;
            }
            var _0x29fc63 = Lampa[_0xaf7d28(0x1a2)]['clone'](_0x3494fb);
            Lampa.Noty.show(`Applying filters to ${_0x3494fb.results.length} items`);
            for (var _0x2043f1 = 0x0; _0x2043f1 < this[_0xaf7d28(0x18e)]['length']; _0x2043f1++) {
                _0x29fc63.results = this[_0xaf7d28(0x18e)][_0x2043f1](_0x29fc63.results);
            }
            _0x29fc63.total_results = _0x29fc63.results.length;
            Lampa.Noty.show(`Filtered to ${_0x29fc63.results.length} items`);
            return _0x29fc63;
        }
    };

    function _0x5aee9c() {
        var _0x57722b = _0x1ecb;
        if (window[_0x57722b(0x184)]) return;
        window[_0x57722b(0x184)] = true;
        Object[_0x57722b(0x1e7)](window['Lampa'][_0x57722b(0x1eb)][_0x57722b(0x1bd)], _0x57722b(0x1ac), {
            'get': function() {
                var _0x3d7383 = _0x57722b;
                return this[_0x3d7383(0x21b)];
            },
            'set': function(_0x57abda) {
                var _0x12c713 = _0x57722b;
                this[_0x12c713(0x21b)] = function() {
                    var _0x117c88 = _0x12c713;
                    _0x57abda['apply'](this);
                    Lampa[_0x117c88(0x1c6)]['send'](_0x117c88(0x1f1), {
                        'type': _0x117c88(0x1ac),
                        'object': this
                    });
                }[_0x12c713(0x1f6)](this);
            }
        });
    }

    function _0x2de6d4(_0x4cba1a, _0xf43e4) {
        var _0x52cc95 = _0x1ecb,
            _0x555841 = _0xf43e4[_0x52cc95(0x1f1)]['filter'](function(_0x3eb567) {
                var _0x502678 = _0x52cc95;
                return _0x3eb567['id'] === _0x4cba1a && Array[_0x502678(0x190)](_0x3eb567[_0x502678(0x204)]) && _0x3eb567[_0x502678(0x204)]['length'] > 0x0;
            })[0x0];
        if (!_0x555841) return [];
        var _0x265b53 = _0x555841[_0x52cc95(0x204)]['filter'](function(_0x115683) {
            var _0xcfe8fc = _0x52cc95;
            return _0x115683[_0xcfe8fc(0x1b8)] > 0x0 && _0x115683[_0xcfe8fc(0x1a4)] > 0x0 && _0x115683[_0xcfe8fc(0x1af)] && new Date(_0x115683[_0xcfe8fc(0x1af)]) < new Date();
        });
        if (_0x265b53[_0x52cc95(0x198)] === 0x0) return [];
        var _0x223ecc = [];
        for (var _0x40976e = 0x0; _0x40976e < _0x265b53[_0x52cc95(0x198)]; _0x40976e++) {
            var _0x3e62bb = _0x265b53[_0x40976e];
            for (var _0x223c90 = 0x1; _0x223c90 <= _0x3e62bb[_0x52cc95(0x1a4)]; _0x223c90++) {
                _0x223ecc[_0x52cc95(0x20e)]({
                    'season_number': _0x3e62bb[_0x52cc95(0x1b8)],
                    'episode_number': _0x223c90
                });
            }
        }
        return _0x223ecc;
    }

    function _0x3e5f09(_0x3d84fe, _0x2f9af1) {
        var _0x2188e9 = _0x1ecb,
            _0x13424b = _0x2f9af1['filter'](function(_0x197f2f) {
                return _0x197f2f['id'] === _0x3d84fe;
            })[0x0] || {};
        if (!Array[_0x2188e9(0x190)](_0x13424b[_0x2188e9(0x1a9)]) || _0x13424b[_0x2188e9(0x1a9)][_0x2188e9(0x198)] === 0x0) return [];
        return _0x13424b[_0x2188e9(0x1a9)][_0x2188e9(0x18f)](function(_0x49c33a) {
            var _0x2893f6 = _0x2188e9;
            return _0x49c33a[_0x2893f6(0x1b8)] > 0x0 && _0x49c33a[_0x2893f6(0x1af)] && new Date(_0x49c33a[_0x2893f6(0x1af)]) < new Date();
        });
    }

    function _0x2b33d5(_0x2f659b, _0x18d266) {
        var _0x264cb0 = _0x1ecb,
            _0x247216 = _0x2f659b['concat'](_0x18d266),
            _0x52d5f6 = [];
        for (var _0x3cfd8e = 0x0; _0x3cfd8e < _0x247216[_0x264cb0(0x198)]; _0x3cfd8e++) {
            var _0xc44e63 = _0x247216[_0x3cfd8e],
                _0x1d419b = false;
            for (var _0xb7ff8 = 0x0; _0xb7ff8 < _0x52d5f6['length']; _0xb7ff8++) {
                if (_0x52d5f6[_0xb7ff8][_0x264cb0(0x1b8)] === _0xc44e63['season_number'] && _0x52d5f6[_0xb7ff8][_0x264cb0(0x1ad)] === _0xc44e63[_0x264cb0(0x1ad)]) {
                    _0x1d419b = true;
                    break;
                }
            }
            !_0x1d419b && _0x52d5f6[_0x264cb0(0x20e)](_0xc44e63);
        }
        return _0x52d5f6;
    }

    function _0x25d9eb(_0x462320, _0x1922a4) {
        var _0xde3c8 = _0x1ecb;
        if (!_0x1922a4 || _0x1922a4['length'] === 0x0) return false;
        for (var _0x56274c = 0x0; _0x56274c < _0x1922a4[_0xde3c8(0x198)]; _0x56274c++) {
            var _0x37b4ed = _0x1922a4[_0x56274c],
                _0x4f0bf6 = Lampa[_0xde3c8(0x1b9)][_0xde3c8(0x1a0)]([_0x37b4ed[_0xde3c8(0x1b8)], _0x37b4ed[_0xde3c8(0x1b8)] > 0xa ? ':' : '', _0x37b4ed['episode_number'], _0x462320][_0xde3c8(0x1b6)]('')),
                _0x476d1b = Lampa['Timeline'][_0xde3c8(0x1f3)](_0x4f0bf6);
            if (_0x476d1b[_0xde3c8(0x1ed)] === 0x0) return false;
        }
        return true;
    }

    function _0x3d3291() {
        var _0x4255a7 = _0x1ecb;
        Lampa[_0x4255a7(0x17f)][_0x4255a7(0x1a5)]({
            'content_filters': {
                'ru': _0x4255a7(0x21c),
                'en': _0x4255a7(0x1c3),
                'uk': _0x4255a7(0x196)
            },
            'asian_filter': {
                'ru': _0x4255a7(0x1da),
                'en': _0x4255a7(0x217),
                'uk': _0x4255a7(0x1da)
            },
            'asian_filter_desc': {
                'ru': _0x4255a7(0x225),
                'en': 'Hide cards of Asian origin',
                'uk': 'Сховати картки азіатського походження'
            },
            'language_filter': {
                'ru': _0x4255a7(0x1cb),
                'en': 'Remove Other Language Content',
                'uk': _0x4255a7(0x1dc)
            },
            'language_filter_desc': {
                'ru': _0x4255a7(0x18b),
                'en': _0x4255a7(0x1f0),
                'uk': _0x4255a7(0x1c8)
            },
            'rating_filter': {
                'ru': 'Убрать низкорейтинговый контент',
                'en': 'Remove Low-Rated Content',
                'uk': _0x4255a7(0x194)
            },
            'rating_filter_desc': {
                'ru': _0x4255a7(0x1e0),
                'en': _0x4255a7(0x1f5),
                'uk': _0x4255a7(0x1d4)
            },
            'history_filter': {
                'ru': _0x4255a7(0x19f),
                'en': _0x4255a7(0x1f4),
                'uk': _0x4255a7(0x1d5)
            },
            'history_filter_desc': {
                'ru': _0x4255a7(0x1a7),
                'en': _0x4255a7(0x1e9),
                'uk': _0x4255a7(0x212)
            }
        });
        Lampa[_0x4255a7(0x216)][_0x4255a7(0x231)]('Translations added');
    }

    function _0x41c505() {
        var _0x2c87df = _0x1ecb;
        // Диагностика начала функции
        Lampa[_0x2c87df(0x216)][_0x2c87df(0x231)]('Adding settings component');
        
        // Регистрация компонента настроек
        Lampa[_0x2c87df(0x1f8)][_0x2c87df(0x1ba)][_0x2c87df(0x1f7)]({
            'component': _0x2c87df(0x1b4),
            'name': Lampa[_0x2c87df(0x17f)][_0x2c87df(0x19a)](_0x2c87df(0x1b4))
        });
        Lampa[_0x2c87df(0x216)][_0x2c87df(0x231)](`Component content_filters added`);

        // Слушатель открытия настроек
        Lampa[_0x2c87df(0x1f8)]['listener'][_0x2c87df(0x209)](_0x2c87df(0x188), function(_0x40ddfc) {
            var _0x5e2390 = _0x2c87df;
            if (_0x40ddfc['name'] !== _0x5e2390(0x1d0)) return;
            Lampa[_0x5e2390(0x216)][_0x5e2390(0x231)](`Settings main opened, checking component`);
            
            var settingsMain = Lampa[_0x5e2390(0x1f8)][_0x5e2390(0x1d0)]();
            var render = settingsMain[_0x5e2390(0x1c0)]();
            var componentExists = render[_0x5e2390(0x19d)](_0x5e2390(0x1c7))[_0x5e2390(0x198)] > 0;
            
            if (!componentExists) {
                Lampa[_0x5e2390(0x1ba)][_0x5e2390(0x1f7)]({
                    'component': _0x5e2390(0x1b4),
                    'name': Lampa[_0x5e2390(0x17f)][_0x5e2390(0x19a)](_0x5e2390(0x1b4))
                });
                Lampa[_0x5e2390(0x216)][_0x5e2390(0x231)](`Component content_filters re-added`);
            }
            
            settingsMain['update']();
            render[_0x5e2390(0x19d)](_0x5e2390(0x1c7))['addClass'](_0x5e2390(0x20f));
            Lampa[_0x5e2390(0x216)][_0x5e2390(0x231)](`Settings updated, component class added`);
        });

        // Добавление пункта в интерфейс
        Lampa[_0x2c87df(0x1f8)][_0x2c87df(0x1a5)]({
            'component': _0x2c87df(0x20c),
            'param': {
                'name': _0x2c87df(0x1b4),
                'type': _0x2c87df(0x189),
                'default': true
            },
            'field': {
                'name': Lampa[_0x2c87df(0x17f)][_0x2c87df(0x19a)](_0x2c87df(0x1b4)),
                'description': _0x2c87df(0x1cc)
            },
            'onRender': function(_0x232f06) {
                var _0x44db38 = _0x2c87df;
                Lampa[_0x44db38(0x216)][_0x44db38(0x231)](`Rendering content_filters menu item`);
                setTimeout(function() {
                    var _0x523ee9 = _0x1ecb,
                        _0x128c78 = Lampa[_0x523ee9(0x17f)][_0x523ee9(0x19a)](_0x523ee9(0x1b4));
                    var menuItem = $(_0x523ee9(0x227) + _0x128c78 + '\x22)');
                    if (menuItem.length === 0) {
                        Lampa[_0x523ee9(0x216)][_0x523ee9(0x231)](`Menu item for content_filters not found`);
                        return;
                    }
                    var interfaceSize = $(_0x523ee9(0x1df));
                    if (interfaceSize.length === 0) {
                        Lampa[_0x523ee9(0x216)][_0x523ee9(0x231)](`Interface size item not found, appending to parent`);
                        menuItem[_0x523ee9(0x1d9)]().appendTo($('.settings-param'));
                    } else {
                        menuItem[_0x523ee9(0x1d9)]()[_0x523ee9(0x187)](interfaceSize);
                    }
                    Lampa[_0x523ee9(0x216)][_0x523ee9(0x231)](`Menu item moved after interface_size`);
                }, 0x0);
                _0x232f06['on'](_0x44db38(0x20a), function() {
                    var _0x4700c4 = _0x44db38;
                    Lampa[_0x4700c4(0x1f8)][_0x4700c4(0x22f)](_0x4700c4(0x1b4));
                    Lampa[_0x4700c4(0x216)][_0x4700c4(0x231)](`Opening content_filters settings`);
                    Lampa[_0x4700c4(0x1f8)][_0x4700c4(0x1d0)]()[_0x4700c4(0x1d3)][_0x4700c4(0x182)] = function() {
                        var _0x39d845 = _0x4700c4;
                        Lampa[_0x39d845(0x1f8)][_0x39d845(0x22f)](_0x39d845(0x20c));
                        Lampa[_0x39d845(0x216)][_0x39d845(0x231)](`Back to interface settings`);
                    };
                });
            }
        });

        // Добавление параметров фильтров
        Lampa[_0x2c87df(0x1ba)][_0x2c87df(0x226)]({
            'component': _0x2c87df(0x1b4),
            'param': {
                'name': _0x2c87df(0x181),
                'type': 'toggle',
                'default': false
            },
            'field': {
                'name': Lampa[_0x2c87df(0x17f)][_0x2c87df(0x19a)](_0x2c87df(0x229)),
                'description': Lampa[_0x2c87df(0x17f)][_0x2c87df(0x19a)](_0x2c87df(0x20b))
            },
            'onChange': function(_0x252194) {
                var _0x3d979a = _0x2c87df;
                _0x17b761[_0x3d979a(0x181)] = _0x252194;
                Lampa[_0x3d979a(0x213)][_0x3d979a(0x232)](_0x3d979a(0x181), _0x252194);
                Lampa[_0x3d979a(0x216)][_0x3d979a(0x231)](`Asian filter toggled: ${_0x252194}`);
                var stored = Lampa[_0x3d979a(0x213)][_0x3d979a(0x220)](_0x3d979a(0x181));
                Lampa[_0x3d979a(0x216)][_0x3d979a(0x231)](`Asian filter stored: ${stored}`);
            }
        });
        Lampa[_0x2c87df(0x1ba)][_0x2c87df(0x226)]({
            'component': _0x2c87df(0x1b4),
            'param': {
                'name': _0x2c87df(0x203),
                'type': _0x2c87df(0x195),
                'default': false
            },
            'field': {
                'name': Lampa[_0x2c87df(0x17f)][_0x2c87df(0x19a)](_0x2c87df(0x19b)),
                'description': Lampa[_0x2c87df(0x17f)][_0x2c87df(0x19a)](_0x2c87df(0x19c))
            },
            'onChange': function(_0x34f7ea) {
                var _0x474cd1 = _0x2c87df;
                _0x17b761[_0x474cd1(0x203)] = _0x34f7ea;
                Lampa[_0x474cd1(0x213)][_0x474cd1(0x232)](_0x474cd1(0x203), _0x34f7ea);
                Lampa[_0x474cd1(0x216)][_0x474cd1(0x231)](`Language filter toggled: ${_0x34f7ea}`);
                var stored = Lampa[_0x474cd1(0x213)][_0x474cd1(0x220)](_0x474cd1(0x203));
                Lampa[_0x474cd1(0x216)][_0x474cd1(0x231)](`Language filter stored: ${stored}`);
            }
        });
        Lampa[_0x2c87df(0x1ba)][_0x2c87df(0x226)]({
            'component': _0x2c87df(0x1b4),
            'param': {
                'name': _0x2c87df(0x1d7),
                'type': _0x2c87df(0x195),
                'default': false
            },
            'field': {
                'name': Lampa[_0x2c87df(0x17f)][_0x2c87df(0x19a)](_0x2c87df(0x1d2)),
                'description': Lampa[_0x2c87df(0x17f)][_0x2c87df(0x19a)](_0x2c87df(0x202))
            },
            'onChange': function(_0x148d6c) {
                var _0x5e4c35 = _0x2c87df;
                _0x17b761[_0x5e4c35(0x1d7)] = _0x148d6c;
                Lampa[_0x5e4c35(0x213)][_0x5e4c35(0x232)](_0x5e4c35(0x1d7), _0x148d6c);
                Lampa[_0x5e4c35(0x216)][_0x5e4c35(0x231)](`Rating filter toggled: ${_0x148d6c}`);
                var stored = Lampa[_0x5e4c35(0x213)][_0x5e4c35(0x220)](_0x5e4c35(0x1d7));
                Lampa[_0x5e4c35(0x216)][_0x5e4c35(0x231)](`Rating filter stored: ${stored}`);
            }
        });
        Lampa[_0x2c87df(0x1ba)][_0x2c87df(0x226)]({
            'component': _0x2c87df(0x1b4),
            'param': {
                'name': 'history_filter_enabled',
                'type': _0x2c87df(0x195),
                'default': false
            },
            'field': {
                'name': Lampa[_0x2c87df(0x17f)][_0x2c87df(0x19a)](_0x2c87df(0x1ef)),
                'description': Lampa[_0x2c87df(0x17f)][_0x2c87df(0x19a)](_0x2c87df(0x1ef) + '_desc')
            },
            'onChange': function(_0x500104) {
                var _0x358375 = _0x2c87df;
                _0x17b761[_0x358375(0x1e6)] = _0x500104;
                Lampa[_0x358375(0x213)][_0x358375(0x232)](_0x358375(0x1e6), _0x500104);
                Lampa[_0x358375(0x216)][_0x358375(0x231)](`History filter toggled: ${_0x500104}`);
                var stored = Lampa[_0x358375(0x213)][_0x358375(0x220)](_0x358375(0x1e6));
                Lampa[_0x358375(0x216)][_0x358375(0x231)](`History filter stored: ${stored}`);
            }
        });
    }

    function _0x293ab2() {
        var _0x4255a7 = _0x1ecb;
        // Очистка старых настроек
        ['asian_filter_enabled', 'language_filter_enabled', 'rating_filter_enabled', 'history_filter_enabled'].forEach(function(key) {
            Lampa[_0x4255a7(0x213)][_0x4255a7(0x232)](key, null);
            Lampa[_0x4255a7(0x216)][_0x4255a7(0x231)](`Cleared setting: ${key}`);
        });
        // Загрузка настроек
        _0x17b761[_0x4255a7(0x181)] = Lampa[_0x4255a7(0x213)][_0x4255a7(0x220)](_0x4255a7(0x181), false) || false;
        _0x17b761[_0x4255a7(0x203)] = Lampa[_0x4255a7(0x213)][_0x4255a7(0x220)](_0x4255a7(0x203), false) || false;
        _0x17b761[_0x4255a7(0x1d7)] = Lampa[_0x4255a7(0x213)][_0x4255a7(0x220)](_0x4255a7(0x1d7), false) || false;
        _0x17b761[_0x4255a7(0x1e6)] = Lampa[_0x4255a7(0x213)][_0x4255a7(0x220)](_0x4255a7(0x1e6), false) || false;
        Lampa[_0x4255a7(0x216)][_0x4255a7(0x231)](`Settings loaded: ${JSON.stringify(_0x17b761)}`);
    }

    function _0x58184e(_0x1a2739) {
        var _0x5e1bd3 = _0x1ecb;
        return _0x1a2739[_0x5e1bd3(0x22b)](Lampa['TMDB'][_0x5e1bd3(0x1c5)]('')) > -0x1 && _0x1a2739[_0x5e1bd3(0x22b)]('/search') === -0x1 && _0x1a2739[_0x5e1bd3(0x22b)](_0x5e1bd3(0x1e5)) === -0x1;
    }

    function _0x570fc8(_0x2dcdff) {
        var _0x569814 = _0x1ecb;
        return !!_0x2dcdff && Array[_0x569814(0x190)](_0x2dcdff[_0x569814(0x223)]) && _0x2dcdff[_0x569814(0x1db)] !== _0x2dcdff[_0x569814(0x223)][_0x569814(0x198)] && _0x2dcdff[_0x569814(0x180)] === 0x1 && !!_0x2dcdff[_0x569814(0x207)] && _0x2dcdff[_0x569814(0x207)] > 0x1;
    }

    function _0x2501a2(_0x37fc68, _0x2f1c5d) {
        var _0x53b397 = _0x1ecb;
        if (_0x37fc68 && _0x37fc68[_0x53b397(0x210)]) return _0x37fc68[_0x53b397(0x210)](_0x2f1c5d);
        var _0x1ca246 = _0x37fc68;
        while (_0x1ca246 && _0x1ca246 !== document) {
            if (_0x1ca246[_0x53b397(0x21f)]) {
                if (_0x1ca246[_0x53b397(0x21f)](_0x2f1c5d)) return _0x1ca246;
            } else if (_0x1ca246[_0x53b397(0x1fa)]) {
                if (_0x1ca246[_0x53b397(0x1fa)](_0x2f1c5d)) return _0x1ca246;
            } else if (_0x1ca246[_0x53b397(0x1fd)]) {
                if (_0x1ca246[_0x53b397(0x1fd)](_0x2f1c5d)) return _0x1ca246;
            } else if (_0x1ca246[_0x53b397(0x183)]) {
                if (_0x1ca246[_0x53b397(0x183)](_0x2f1c5d)) return _0x1ca246;
            } else if (_0x1ca246[_0x53b397(0x1ae)]) {
                if (_0x1ca246[_0x53b397(0x1ae)](_0x2f1c5d)) return _0x1ca246;
            } else if (_0x1ca246[_0x53b397(0x1a1)] && _0x1ca246[_0x53b397(0x1a1)][_0x53b397(0x22b)](_0x2f1c5d[_0x53b397(0x19c)]('.', '')) !== -0x1) {
                return _0x1ca246;
            }
            _0x1ca246 = _0x1ca246[_0x53b397(0x1b0)] || _0x1ca246[_0x53b397(0x1c1)];
        }
        return null;
    }

    function _0x5110e0() {
        var _0x5cc5ec = _0x1ecb;
        _0x5aee9c();
        _0x293ab2();
        _0x3d3291();
        _0x41c505();
        Lampa[_0x5cc5ec(0x216)][_0x5cc5ec(0x231)]('Plugin initialized');
        Lampa[_0x5cc5ec(0x1c6)][_0x5cc5ec(0x209)](_0x5cc5ec(0x1b5), function(_0x10ec5b) {
            var _0x96f872 = _0x5cc5ec;
            if (_0x10ec5b[_0x96f872(0x185)] !== _0x96f872(0x1ce) || !_0x570fc8(_0x10ec5b[_0x96f872(0x1b2)])) return;
            var _0x1deecd = $(_0x2501a2(_0x10ec5b[_0x96f872(0x22a)], '.items-line'))[_0x96f872(0x19d)](_0x96f872(0x1b1)),
                _0x45b9ac = _0x1deecd[_0x96f872(0x19d)](_0x96f872(0x200))[_0x96f872(0x198)] !== 0x0;
            if (_0x45b9ac) return;
            var _0xe34ed7 = document[_0x96f872(0x22d)](_0x96f872(0x1d8));
            _0xe34ed7['classList'][_0x96f872(0x1a5)](_0x96f872(0x233));
            _0xe34ed7['classList'][_0x96f872(0x1a5)]('selector');
            _0xe34ed7[_0x96f872(0x219)] = Lampa[_0x96f872(0x17f)][_0x96f872(0x19a)](_0x96f872(0x186));
            _0xe34ed7[_0x96f872(0x206)](_0x96f872(0x20a), function() {
                var _0x4e86c8 = _0x96f872;
                Lampa[_0x4e86c8(0x193)][_0x4e86c8(0x20e)]({
                    'url': _0x10ec5b[_0x4e86c8(0x1b2)][_0x4e86c8(0x1aa)],
                    'title': _0x10ec5b[_0x4e86c8(0x1b2)][_0x4e86c8(0x1ea)] || Lampa[_0x4e86c8(0x17f)][_0x4e86c8(0x19a)](_0x4e86c8(0x22e)),
                    'component': _0x4e86c8(0x191),
                    'page': 0x1,
                    'genres': _0x10ec5b[_0x4e86c8(0x1cf)][_0x4e86c8(0x1ee)],
                    'filter': _0x10ec5b[_0x4e86c8(0x1b2)][_0x4e86c8(0x18f)],
                    'source': _0x10ec5b[_0x4e86c8(0x1b2)][_0x4e86c8(0x197)] || _0x10ec5b[_0x4e86c8(0x1cf)][_0x4e86c8(0x22d)][_0x4e86c8(0x197)]
                });
                Lampa[_0x4e86c8(0x216)][_0x4e86c8(0x231)](`Filter button clicked`);
            });
            _0x1deecd[_0x96f872(0x1d6)](_0xe34ed7);
            Lampa[_0x96f872(0x216)][_0x96f872(0x231)](`Filter button added`);
        });
        Lampa[_0x5cc5ec(0x1c6)][_0x5cc5ec(0x209)](_0x5cc5ec(0x1b5), function(_0x38e6c7) {
            var _0x52db0f = _0x5cc5ec;
            if (_0x38e6c7[_0x52db0f(0x185)] !== _0x52db0f(0x1d6) || !_0x570fc8(_0x38e6c7[_0x52db0f(0x1b2)])) return;
            if (_0x38e6c7[_0x52db0f(0x205)][_0x52db0f(0x198)] === _0x38e6c7[_0x52db0f(0x1b2)][_0x52db0f(0x223)][_0x52db0f(0x198)]) {
                Lampa[_0x52db0f(0x1bb)][_0x52db0f(0x18a)](_0x38e6c7[_0x52db0f(0x205)]);
                Lampa[_0x52db0f(0x1bb)][_0x52db0f(0x1c2)](_0x38e6c7[_0x52db0f(0x1b5)][_0x52db0f(0x186)]);
                Lampa[_0x52db0f(0x216)][_0x52db0f(0x231)](`Pagination updated`);
            }
        });
        Lampa[_0x5cc5ec(0x1c6)][_0x5cc5ec(0x209)]('request_sucuses', function(_0x407b0e) {
            var _0xf247e7 = _0x5cc5ec;
            if (_0x58184e(_0x407b0e[_0xf247e7(0x1cf)][_0xf247e7(0x1aa)]) && _0x407b0e[_0xf247e7(0x1b2)] && Array[_0xf247e7(0x190)](_0x407b0e[_0xf247e7(0x1b2)][_0xf247e7(0x223)])) {
                _0x407b0e[_0xf247e7(0x1b2)][_0xf247e7(0x1db)] = _0x407b0e[_0xf247e7(0x1b2)][_0xf247e7(0x223)][_0xf247e7(0x198)];
                _0x407b0e[_0xf247e7(0x1b2)] = _0x19f0df[_0xf247e7(0x1a3)](_0x407b0e[_0xf247e7(0x1b2)]);
            } else {
                Lampa[_0xf247e7(0x216)][_0xf247e7(0x231)]('No results to filter or invalid data');
            }
        });
    }

    window[_0x38fdd0(0x22c)] ? _0x5110e0() : Lampa[_0x38fdd0(0x1c6)][_0x38fdd0(0x209)](_0x38fdd0(0x22c), function(_0x20cc63) {
        var _0x1e06bf = _0x38fdd0;
        if (_0x20cc63[_0x1e06bf(0x185)] === _0x1e06bf(0x224)) _0x5110e0();
    });
})();
